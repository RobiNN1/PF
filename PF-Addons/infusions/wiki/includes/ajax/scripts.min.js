let WIKI=document.location.origin+site_path+"/infusions/wiki/";function search_ajax(){let a=WIKI+"includes/ajax/search.php";$("#wiki_search").bind("keyup",(function(){$.ajax({url:a,get:"GET",data:$.param({searchstring:$(this).val()}),dataType:"json",success:function(a){if(""===$("#wiki_search").val())$(".search-dropdown").removeClass("open");else{let t="";a.status?t='<li class="p-10"><span>'+a.status+"</span></li>":$.each(a,(function(a,s){s&&(t+='<li><a href="'+s.link+'">'+s.title+'</a><small class="p-l-20 p-r-20"><i class="fa fa-hashtag"></i> <a href="'+s.cat_link+'">'+s.cat_title+"</a></small></li>")})),$("#wiki_search_results").html(t),$(".search-dropdown").addClass("open")}}})}))}function stats_ajax(a){if(!$(".is-helpful-stat").hasClass("disabled")){let t=WIKI+"includes/ajax/stats.php",s=new URL(window.location.href).searchParams.get("page_id");$.ajax({url:t,get:"GET",data:{page_id:s,action:a},dataType:"json",success:function(){let t,s;if("yes"===a?(t=$(".thumbs-up"),s=$(".thumbs-down")):"no"===a?(t=$(".thumbs-down"),s=$(".thumbs-up")):(t=$(".thumbs-up"),s=$(".thumbs-down")),!t.hasClass("active")){$(t).find(".count").text(parseInt($(t).find(".count").text())+1),$(t).addClass("active");let a=0!==parseInt(s.find(".count").text())?parseInt(s.find(".count").text())-1:0;s.find(".count").text(a),s.removeClass("active")}}})}}search_ajax(),$((function(){$(".thumbs-up").on("click",(function(a){a.preventDefault(),stats_ajax("yes")})),$(".thumbs-down").on("click",(function(a){a.preventDefault(),stats_ajax("no")})),$(document.body).scrollspy({target:"#scrollspy",offset:$("#main-menu, #DefaultMenu, #vl-menu").height()}),$(window).on("load",(function(){$(document.body).scrollspy("refresh")}))}));